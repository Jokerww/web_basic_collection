<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
	</head>
	<body>
		
		<script type="text/javascript">
			// 涉及到ajax '不能'使用文件协议访问(有时候可以) 就是不能以文件打开的方式访问
			// ajax是一套API 核心提供的类型:XMLHttpRequest
			//创建一个请求实例(用户代理) 就相当于安装了一个浏览器
			var xhr = new XMLHttpRequest();
			console.log(xhr.readyState);//0 初始化代理请求

			//打开浏览器输入网址  第一个参数是请求的方式GET POST两种方式  第二个是请求的地址 相对路径或绝对路径
			xhr.open('GET','user.js');
			console.log(xhr.readyState);//1 建立一个与远程特定端口的链接

			//敲回车键 发起请求
			xhr.send();
			console.log(xhr.readyState);//1

			//等待响应  发起请求后 需要等待一定的时间 让服务器返回响应
			//看结果  查看准备状态
			xhr.addEventListener('readystatechange',function(){
				console.log(this.readyState);
				switch (this.readyState){
					case 2:
						console.log(this.readyState);
						//已经接受了响应报文的响应头
						console.log(this.getAllResponseHeaders());
						break;
					case 3:
						console.log(this.readyState);
						//正在下载响应报文的响应体 有可能为空 有可能不完整
						// 在此处处理响应体并不可靠
						console.log(this.responseText);
						break;
					case 4:
						console.log(this.readyState);
						//已经完全接受了响应报文的响应头和响应体
						// 此时的报文体才是可用的
						// if(this.readyState !== 4)return
						console.log(this.responseText);
						break;
				}
			})
		</script>
	</body>
</html>
